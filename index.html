<!DOCTYPE html>
<html>

<head>
    <!-- JQuery framework to  -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <!--make HTTP request from front end to back end -->
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script> 

    <script>
        $(document).ready(async ()=>{

        //EXTRACTS ALL THE DATA ON PAGE LOAD
        let resultData = []
        const movieData =  async ()=> {
            await axios.get("https://data.sfgov.org/resource/yitu-d5am.json")
                .then((result) => {
                result.data.forEach(data => {
                    resultData.push(data)
                });
            })
        }
        movieData()


        // EVENT LISTENER ON FORM INPUT THET DISPLAYS DATA IN P-TAG
        const input = document.querySelector('input');
        const log = document.getElementById('values');
        input.addEventListener('input', updateValue);

        function updateValue(e) {
            let typedInput = [e.target.value.toUpperCase()]

            resultData.filter((movie) => {
                let title = movie.title.toUpperCase()
                
                if(title.startsWith(typedInput[0])){
                    log.textContent = `Title: ${movie.title}; Location: ${movie.locations} `
                }
                for(let i = 1; i < typedInput.length; i++){
                    if(typedInput[i] === title[i]){
                        log.textContent = `Title: ${movie.title}; Location: ${movie.locations} `
                    } 
                }
            })
            if(typedInput[0].length === 0){
                log.textContent = 'Please enter a Title'
            }  

            
            
        }
    })
        
    </script>  
</head>

<body>
    <form action="">
        <label for="title">Title</label>
        <input type="text" id="title" name="title"><br><br>
        <!-- <input type="button" id="submit" value="Submit"> -->
    </form>
    <p id="values"></p>



</body>

</html>
